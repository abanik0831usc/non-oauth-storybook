import { Meta } from '@storybook/addon-docs';

<Meta title="MDX/Integration Guidelines" />

### Intuit Widgets

Intuit widget **loads** the Aggregator experience with the following `queryParams`

```
https://aggregator-url.com?theme=theme&width=width
```

# How do I communicate with Intuit?

Intuit will be iframing the Aggregator window. Communication will be done via `window.PostMessage`

# how Do I send message via post message?

```
window.parent.postMessage(payload, url)
```

# Expected payload from Aggregator to Intuit

`Authentication` screen:

```
{
	enableSecondaryButton: true| false,
	enablePrimaryButton: true| false,
	isSecondaryButtonVisible: true| false,
	height: string, // height of iframe window
	width: string, // width of iframe window
	screen <string>: 'authentication'
}
```

`Recaptcha` screen:

```
{
	enableSecondaryButton: true| false,
	enablePrimaryButton: true| false,
	height: string, // height of iframe window
	width: string, // width of iframe window
	screen <string>: 'recaptcha'
}
```

`MFA` screen:

```
{
	enablePrimaryButton: true| false,
	primaryButtonContent: string,
	height: string, // height of iframe window
	width: string, // width of iframe window
	screen <string>: 'MFA'
}
```

`Connecting` screen:

```
{
	isConnectingScreen: true,
	height: string, // height of iframe window
	width: string, // width of iframe window
	screen <string>: 'connecting'
}
```

`Success` screen:

```
{
	response_token: string,
	screen <string>: 'success'
}
```

`Error` screen:

```
{
	error: Object {code, reason, other details},
	height: string, // height of iframe window
	width: string, // width of iframe window
	screen <string>: 'error'
}
```

<h3>Payload from Widgets to Aggregator</h3>

`onPrimaryButtonClick` (Continue):

```
navigate<string>: 'forward',
screen: 'authentication' // pass current screen name
```

`onSecondaryButtonClick` (Back):

```
navigate<string>: 'back',
screen: 'authentication' // pass current screen name
```

```

```
